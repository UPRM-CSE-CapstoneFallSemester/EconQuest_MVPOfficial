{% extends 'student/layout.html' %}
{% block student_content %}

<div class="max-w-3xl mx-auto">
  <h1 class="text-2xl font-bold text-emerald-300">{{ activity.title }}</h1>
  <p class="text-emerald-200/80 mt-1">Type: {{ activity.type or 'quiz' }}</p>

  {% if attempt_limit is not none %}
    <div class="mt-2 text-sm text-emerald-200/80">
      Attempts: {{ attempts_used }}/{{ attempt_limit }}
      {% if attempts_left is not none %} Â· Left: {{ attempts_left }}{% endif %}
    </div>
  {% endif %}

  {% if blocked %}
    <div class="mt-4 p-4 rounded bg-red-900/30 border border-red-800/40 text-red-100">
      You have reached the attempt limit for this activity.
    </div>
  {% else %}
    <form method="post" class="mt-4 space-y-4">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      {% set questions = (content.questions or []) %}
      {% for q in questions %}
        {% set q_idx = loop.index0 %}
        <div class="p-4 rounded-xl bg-emerald-900/30 border border-emerald-800/40">
          <div class="font-semibold text-emerald-100">{{ loop.index }}. {{ q.text }}</div>
          <div class="mt-2 space-y-2">
            {% for opt in q.options or [] %}
              <label class="flex items-start gap-3 cursor-pointer">
                <input type="radio" name="q{{ q_idx }}" value="{{ opt.key }}" required class="mt-1">
                <div class="text-emerald-100">{{ opt.label }}</div>
              </label>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
      <button class="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 text-white">Submit</button>
    </form>
  {% endif %}
</div>

{% endblock %}

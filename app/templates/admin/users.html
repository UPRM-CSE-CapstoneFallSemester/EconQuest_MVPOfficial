{% extends 'admin/layout.html' %}
{% block admin_content %}
<div class="flex items-center justify-between mb-4">
  <h1 class="text-xl font-semibold">Users & Roles</h1>
  <a class="px-3 py-2 rounded bg-slate-200 dark:bg-slate-700 dark:text-slate-100" href="{{ url_for('admin.dashboard') }}">‚Üê Volver al dashboard</a>
</div>

<div class="bg-white dark:bg-slate-800 dark:text-slate-100 p-6 rounded-2xl shadow">
  <table class="w-full text-sm">
    <thead><tr class="text-left"><th>Nombre</th><th>Email</th><th>Rol</th><th>Acciones</th></tr></thead>
    <tbody>
      {% for u in users %}
      <tr class="border-t border-slate-200 dark:border-slate-700">
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.role }}</td>
        <td>
          <form method="post" class="flex items-center gap-2 py-2">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="user_id" value="{{ u.id }}">
            <select name="role" class="border rounded px-2 py-1 dark:bg-slate-900 dark:border-slate-700">
              <option value="student" {{ 'selected' if u.role=='student' else '' }}>student</option>
              <option value="teacher" {{ 'selected' if u.role=='teacher' else '' }}>teacher</option>
              <option value="admin"   {{ 'selected' if u.role=='admin'   else '' }}>admin</option>
            </select>
            <button class="px-3 py-1 rounded bg-emerald-600 text-white">Actualizar</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
